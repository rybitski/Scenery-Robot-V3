{"ast":null,"code":"import _classCallCheck from \"/Users/josephkaraki/middleman/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/josephkaraki/middleman/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/josephkaraki/middleman/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/josephkaraki/middleman/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/josephkaraki/middleman/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/josephkaraki/middleman/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _objectWithoutProperties from \"/Users/josephkaraki/middleman/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/Users/josephkaraki/middleman/client/src/App/pages/List.js\";\nimport React, { Component } from 'react';\nimport Gamepad from 'react-gamepad';\nimport 'rc-slider/assets/index.css';\nimport 'rc-tooltip/assets/bootstrap.css';\nimport Tooltip from 'rc-tooltip';\nimport Slider from 'rc-slider';\nvar wrapperStyle = {\n  width: 400,\n  margin: 25\n};\nvar createSliderWithTooltip = Slider.createSliderWithTooltip;\nvar Handle = Slider.Handle;\n\nvar handle = function handle(props) {\n  var value = props.value,\n      dragging = props.dragging,\n      index = props.index,\n      restProps = _objectWithoutProperties(props, [\"value\", \"dragging\", \"index\"]);\n\n  return React.createElement(Tooltip, {\n    prefixCls: \"rc-slider-tooltip\",\n    overlay: value,\n    visible: dragging,\n    placement: \"top\",\n    key: index,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14\n    },\n    __self: this\n  }, React.createElement(Handle, Object.assign({\n    value: value\n  }, restProps, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    },\n    __self: this\n  })));\n};\n\nvar List =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(List, _Component);\n\n  // Initialize the state\n  function List(props) {\n    var _this;\n\n    _classCallCheck(this, List);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(List).call(this, props));\n\n    _this.updateHome = function () {\n      var out = 2 + \",\" + 0;\n      fetch('/api/home', {\n        //The remaining url of the localhost:5000 server.\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          data: out\n        })\n      });\n    };\n\n    _this.sendData = function () {\n      var out = Math.round(_this.state.lsx) + \",\" + Math.round(_this.state.lsy) + \",\" + Math.round(_this.state.rsy) * 10 + \",\" + _this.state.rt + \",\" + _this.state.dpad + \",\" + _this.state.a_button + \",\" + _this.state.rb + \",\" + _this.state.lb + \",\" + Math.round(_this.state.seconds * 10);\n      fetch('/api/xsend', {\n        //The remaining url of the localhost:5000 server.\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          data: out\n        })\n      });\n    };\n\n    _this.onRT = _this.onRT.bind(_assertThisInitialized(_this));\n    _this.onA = _this.onA.bind(_assertThisInitialized(_this));\n    _this.axisChangeHandler = _this.axisChangeHandler.bind(_assertThisInitialized(_this));\n    _this.onButtonDown = _this.onButtonDown.bind(_assertThisInitialized(_this));\n    _this.onLB = _this.onLB.bind(_assertThisInitialized(_this));\n    _this.onRB = _this.onRB.bind(_assertThisInitialized(_this));\n    _this.onButtonUp = _this.onButtonUp.bind(_assertThisInitialized(_this));\n    _this.handleChangeDeadzone = _this.handleChangeDeadzone.bind(_assertThisInitialized(_this));\n    _this.onSensitivityChange = _this.onSensitivityChange.bind(_assertThisInitialized(_this));\n    _this.onSpeedChange = _this.onSpeedChange.bind(_assertThisInitialized(_this));\n    _this.state = {\n      deadzone: 0.02,\n      speed: 127,\n      sensitivity: 0.5,\n      out_data: \"\",\n      a_button: 0,\n      rsx: 0,\n      rsy: 0,\n      lsx: 0,\n      lsy: 0,\n      rt: 0,\n      dpad: 0,\n      lb: 0,\n      rb: 0,\n      seconds: 0,\n      list: []\n    };\n    return _this;\n  } //Timer code to make sure server data is new\n\n\n  _createClass(List, [{\n    key: \"tick\",\n    value: function tick() {\n      this.setState(function (prevState) {\n        return {\n          seconds: prevState.seconds + 0.1\n        };\n      });\n      this.sendData();\n    }\n  }, {\n    key: \"connectHandler\",\n    value: function connectHandler(gamepadIndex) {\n      console.log(\"Gamepad \".concat(gamepadIndex, \" connected !\"));\n    }\n  }, {\n    key: \"disconnectHandler\",\n    value: function disconnectHandler(gamepadIndex) {\n      console.log(\"Gamepad \".concat(gamepadIndex, \" disconnected !\"));\n    }\n  }, {\n    key: \"onSpeedChange\",\n    value: function onSpeedChange(value) {\n      this.setState({\n        speed: value * 127 / 100\n      }); //normalize the speed from a 1-100 percentage to 1-127 speed \n    }\n  }, {\n    key: \"onSensitivityChange\",\n    value: function onSensitivityChange(value) {\n      this.setState({\n        sensitivity: value / 100\n      });\n    }\n  }, {\n    key: \"handleChangeDeadzone\",\n    value: function handleChangeDeadzone(event) {\n      this.setState({\n        deadzone: event.target.value\n      });\n      console.log(this.state.deadzone);\n    }\n  }, {\n    key: \"handleSubmitDeadzone\",\n    value: function handleSubmitDeadzone(event) {\n      console.log('Your favorite flavor is: ' + this.state.deadzone);\n    } //When button is released, set the value to 0\n\n  }, {\n    key: \"onButtonUp\",\n    value: function onButtonUp(buttonName) {\n      if (buttonName === \"A\") this.setState({\n        a_button: 0\n      });\n      if (buttonName === \"LB\") this.setState({\n        lb: 0\n      });\n      if (buttonName === \"RB\") this.setState({\n        rb: 0\n      });\n      if (buttonName === \"DPadDown\") this.setState({\n        dpad: 0\n      });\n      if (buttonName === \"DPadUp\") this.setState({\n        dpad: 0\n      });\n      if (buttonName === \"RT\") this.setState({\n        rt: 0\n      });\n    } //Stick handler: for x-values (turning) cast to an exact value between -127 and 127. This is to eliminate jerkiness in turning\n    //For the y-values (forward/back), cast to 127 then divide by 10. This reduces precision, but also lowers the number of packets to be sent.\n\n  }, {\n    key: \"axisChangeHandler\",\n    value: function axisChangeHandler(axisName, value, previousValue) {\n      console.log(axisName, value);\n      if (axisName === \"RightStickX\") this.setState({\n        rsx: value * 127\n      });\n      if (axisName === \"RightStickY\") this.setState({\n        rsy: value * 127 / 10\n      });\n\n      if (axisName === \"LeftStickX\") {\n        /*var xtest = value * 127;\n         if (Math.abs(xtest) > this.state.speed) { //if speed exceeds the set max, set the speed to the given maximum\n             if (value < -10)\n                 this.setState({\n                     lsx: this.state.speed * -1\n                 });\n             else if (value > 10)\n                 this.setState({\n                     lsx: this.state.speed\n                 });\n         }\n         else\n             this.setState({\n                 //lsx: value * 127\n                     lsx: (this.state.sensitivity*(Math.pow(value,3)) + (1-this.state.sensitivity)*value) * 127 //adding the variable sensitivity to x values\n             });*/\n        this.setState({\n          lsx: this.state.speed * value\n        });\n      }\n\n      if (axisName === \"LeftStickY\") {\n        var test = value * 127;\n        /* if (Math.abs(test) > this.state.speed) { //if speed exceeds the set max, set the speed to the given maximum\n             if (value < 0)\n                 this.setState({\n                     lsy: this.state.speed * -1\n                 });\n             else \n                 this.setState({\n                     lsy: this.state.speed\n                 });\n         }\n         else\n             this.setState({\n                 lsy: value * 127\n             });*/\n\n        this.setState({\n          lsy: this.state.speed * value\n        });\n      }\n    }\n  }, {\n    key: \"onRT\",\n    value: function onRT() {\n      console.log(\"RT\");\n      this.setState({\n        rt: 1\n      });\n    } //When dpad is pressed, set the value to specific int\n\n  }, {\n    key: \"onButtonDown\",\n    value: function onButtonDown(buttonName) {\n      console.log(buttonName);\n      if (buttonName === \"DPadUp\") this.setState({\n        dpad: 1\n      });\n      if (buttonName === \"DPadRight\") this.setState({\n        dpad: 2\n      });\n      if (buttonName === \"DPadDown\") this.setState({\n        dpad: 3\n      });\n      if (buttonName === \"DPadLeft\") this.setState({\n        dpad: 4\n      });\n    }\n  }, {\n    key: \"onA\",\n    value: function onA() {\n      console.log(\"A\");\n      this.setState({\n        a_button: 1\n      });\n    }\n  }, {\n    key: \"onLB\",\n    value: function onLB() {\n      console.log(\"LB\");\n      this.setState({\n        lb: 1\n      });\n    }\n  }, {\n    key: \"onRB\",\n    value: function onRB() {\n      console.log(\"RB\");\n      this.setState({\n        rb: 1\n      });\n    } // Start timer on page load\n\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.updateHome();\n      this.interval = setInterval(function () {\n        return _this2.tick();\n      }, 100);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.interval);\n    }\n  }, {\n    key: \"render\",\n    //What will render on the client page\n    value: function render() {\n      var list = this.state.list;\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(Gamepad, {\n        deadZone: this.state.deadzone,\n        onConnect: this.connectHandler,\n        onDisconnect: this.disconnectHandler,\n        onButtonDown: this.onButtonDown,\n        onAxisChange: this.axisChangeHandler,\n        onLB: this.onLB,\n        onRB: this.onRB,\n        onA: this.onA,\n        onRT: this.onRT,\n        onButtonUp: this.onButtonUp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, \"Seconds: \", this.state.seconds), React.createElement(\"div\", {\n        style: wrapperStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292\n        },\n        __self: this\n      }, \"Speed\"), React.createElement(Slider, {\n        min: 0,\n        max: 100,\n        defaultValue: 100,\n        onChange: this.onSpeedChange,\n        handle: handle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      })), React.createElement(\"form\", {\n        onSubmit: this.handleSubmitDeadzone,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, \"Pick your deadzone:\", React.createElement(\"select\", {\n        value: this.state.deadzone,\n        onChange: this.handleChangeDeadzone,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"0.02\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, \"2\"), React.createElement(\"option\", {\n        value: \"0.04\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, \"4\"), React.createElement(\"option\", {\n        value: \"0.06\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, \"6\"), React.createElement(\"option\", {\n        value: \"0.08\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }, \"8\")))), React.createElement(\"div\", {\n        style: wrapperStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, \"Sensitivity\"), React.createElement(Slider, {\n        min: 0,\n        max: 100,\n        defaultValue: 50,\n        onChange: this.onSensitivityChange,\n        handle: handle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      })), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }, \"Live Server Data\"), list.length ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, list.map(function (item) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 317\n          },\n          __self: this\n        }, item);\n      })) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, \"Server Stuff\"), Math.round(this.state.lsx), \",\", Math.round(this.state.lsy), \",\", Math.round(this.state.rsy) * 10, \",\", this.state.rt, \",\", this.state.dpad, \",\", this.state.a_button, \",\", this.state.rb, \",\", this.state.lb, \", \", this.state.deadzone, \", \", this.state.speed, \", \", this.state.sensitivity));\n    }\n  }]);\n\n  return List;\n}(Component);\n\nexport default List;","map":{"version":3,"sources":["/Users/josephkaraki/middleman/client/src/App/pages/List.js"],"names":["React","Component","Gamepad","Tooltip","Slider","wrapperStyle","width","margin","createSliderWithTooltip","Handle","handle","props","value","dragging","index","restProps","List","updateHome","out","fetch","method","headers","body","JSON","stringify","data","sendData","Math","round","state","lsx","lsy","rsy","rt","dpad","a_button","rb","lb","seconds","onRT","bind","onA","axisChangeHandler","onButtonDown","onLB","onRB","onButtonUp","handleChangeDeadzone","onSensitivityChange","onSpeedChange","deadzone","speed","sensitivity","out_data","rsx","list","setState","prevState","gamepadIndex","console","log","event","target","buttonName","axisName","previousValue","test","interval","setInterval","tick","clearInterval","connectHandler","disconnectHandler","handleSubmitDeadzone","length","map","item"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Gamepad from 'react-gamepad'\nimport 'rc-slider/assets/index.css';\nimport 'rc-tooltip/assets/bootstrap.css';\nimport Tooltip from 'rc-tooltip';\nimport Slider from 'rc-slider';\nconst wrapperStyle = { width: 400, margin: 25 };\n\nconst createSliderWithTooltip = Slider.createSliderWithTooltip;\nconst Handle = Slider.Handle;\nconst handle = (props) => {\n    const { value, dragging, index, ...restProps } = props;\n    return (\n        <Tooltip\n            prefixCls=\"rc-slider-tooltip\"\n            overlay={value}\n            visible={dragging}\n            placement=\"top\"\n            key={index}\n        >\n            <Handle value={value} {...restProps} />\n        </Tooltip>\n    );\n};\n\nclass List extends Component {\n    // Initialize the state\n    constructor(props) {\n        super(props);\n        this.onRT = this.onRT.bind(this);\n        this.onA = this.onA.bind(this);\n        this.axisChangeHandler = this.axisChangeHandler.bind(this);\n        this.onButtonDown = this.onButtonDown.bind(this);\n        this.onLB = this.onLB.bind(this);\n        this.onRB = this.onRB.bind(this);\n        this.onButtonUp = this.onButtonUp.bind(this);\n        this.handleChangeDeadzone = this.handleChangeDeadzone.bind(this);\n        this.onSensitivityChange = this.onSensitivityChange.bind(this);\n        this.onSpeedChange = this.onSpeedChange.bind(this);\n\n        this.state = {\n            deadzone: 0.02,\n            speed: 127,\n            sensitivity:0.5, \n            out_data: \"\",\n            a_button: 0,\n            rsx: 0,\n            rsy: 0,\n            lsx: 0,\n            lsy: 0,\n            rt: 0,\n            dpad: 0,\n            lb: 0,\n            rb: 0,\n            seconds: 0,\n            list: []\n        }\n\n    }\n    //Timer code to make sure server data is new\n    tick() {\n        this.setState(prevState => ({\n            seconds: prevState.seconds + 0.1\n        }));\n        this.sendData();\n\n    }\n\n\n\n\n    connectHandler(gamepadIndex) {\n        console.log(`Gamepad ${gamepadIndex} connected !`)\n    }\n\n    disconnectHandler(gamepadIndex) {\n        console.log(`Gamepad ${gamepadIndex} disconnected !`)\n    }\n    onSpeedChange(value) {\n        this.setState({ speed: value * 127 / 100 }); //normalize the speed from a 1-100 percentage to 1-127 speed \n\n    }\n    onSensitivityChange(value){\n        this.setState({ sensitivity: value / 100 });\n\n    }\n\n    handleChangeDeadzone(event) {\n        this.setState({ deadzone: event.target.value });\n        console.log(this.state.deadzone)\n    }\n\n    handleSubmitDeadzone(event) {\n        console.log('Your favorite flavor is: ' + this.state.deadzone);\n    }\n\n    //When button is released, set the value to 0\n\n    onButtonUp(buttonName) {\n        if (buttonName === \"A\")\n            this.setState({\n                a_button: 0\n            });\n        if (buttonName === \"LB\")\n            this.setState({\n                lb: 0\n            });\n        if (buttonName === \"RB\")\n            this.setState({\n                rb: 0\n            });\n        if (buttonName === \"DPadDown\")\n            this.setState({\n                dpad: 0\n            });\n        if (buttonName === \"DPadUp\")\n            this.setState({\n                dpad: 0\n            });\n        if (buttonName ===\"RT\")\n            this.setState({\n                rt: 0\n            });    }\n\n    //Stick handler: for x-values (turning) cast to an exact value between -127 and 127. This is to eliminate jerkiness in turning\n    //For the y-values (forward/back), cast to 127 then divide by 10. This reduces precision, but also lowers the number of packets to be sent.\n    axisChangeHandler(axisName, value, previousValue) {\n        console.log(axisName, value)\n        if (axisName === \"RightStickX\")\n            this.setState({\n                rsx: value * 127\n            });\n        if (axisName === \"RightStickY\")\n            this.setState({\n                rsy: value * 127 / 10\n            });\n        if (axisName === \"LeftStickX\"){\n            /*var xtest = value * 127;\n             if (Math.abs(xtest) > this.state.speed) { //if speed exceeds the set max, set the speed to the given maximum\n                 if (value < -10)\n                     this.setState({\n                         lsx: this.state.speed * -1\n                     });\n                 else if (value > 10)\n                     this.setState({\n                         lsx: this.state.speed\n                     });\n             }\n             else\n                 this.setState({\n                     //lsx: value * 127\n\n                        lsx: (this.state.sensitivity*(Math.pow(value,3)) + (1-this.state.sensitivity)*value) * 127 //adding the variable sensitivity to x values\n                 });*/\n                 this.setState({\n                    lsx: this.state.speed * value\n                });\n         }\n        if (axisName === \"LeftStickY\") {\n           var test = value * 127;\n           /* if (Math.abs(test) > this.state.speed) { //if speed exceeds the set max, set the speed to the given maximum\n                if (value < 0)\n                    this.setState({\n                        lsy: this.state.speed * -1\n                    });\n                else \n                    this.setState({\n                        lsy: this.state.speed\n                    });\n            }\n            else\n                this.setState({\n                    lsy: value * 127\n                });*/\n                this.setState({\n                    lsy: this.state.speed * value\n                });\n        }\n\n    }\n    onRT() {\n        console.log(\"RT\")\n        this.setState({\n            rt: 1\n        });\n\n    }\n\n    //When dpad is pressed, set the value to specific int\n\n    onButtonDown(buttonName) {\n        console.log(buttonName)\n        if (buttonName === \"DPadUp\")\n            this.setState({\n                dpad: 1\n            });\n        if (buttonName === \"DPadRight\")\n            this.setState({\n                dpad: 2\n            });\n        if (buttonName === \"DPadDown\")\n            this.setState({\n                dpad: 3\n            });\n        if (buttonName === \"DPadLeft\")\n            this.setState({\n                dpad: 4\n            });\n    }\n\n\n    onA() {\n        console.log(\"A\")\n        this.setState({\n            a_button: 1\n        });\n    }\n\n\n    onLB() {\n        console.log(\"LB\")\n        this.setState({\n            lb: 1\n        });\n    }\n    onRB() {\n        console.log(\"RB\")\n        this.setState({\n            rb: 1\n        });\n\n    }\n    // Start timer on page load\n    componentDidMount() {\n        this.updateHome();\n        this.interval = setInterval(() => this.tick(), 100);\n    }\n\n    componentWillUnmount() {\n        clearInterval(this.interval);\n    }\n\n    updateHome = () => {\n        var out = 2+\",\"+0;\n        fetch('/api/home', { //The remaining url of the localhost:5000 server.\n            method: 'post',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                data: out,\n            }),\n        })\n    };\n\n    // Send data to the server. We round so that we dont send the 15 trailing decimals.\n    sendData = () => {\n        var out = Math.round(this.state.lsx) + \",\" + Math.round(this.state.lsy)  + \",\" + Math.round(this.state.rsy) * 10 + \",\" + this.state.rt + \",\" + this.state.dpad + \",\" + this.state.a_button + \",\" + this.state.rb + \",\" + this.state.lb + \",\" + Math.round(this.state.seconds * 10);\n        fetch('/api/xsend', { //The remaining url of the localhost:5000 server.\n            method: 'post',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                data: out,\n            }),\n        })\n    };\n\n    //What will render on the client page\n    render() {\n        const { list } = this.state;\n\n        return (\n            <div className=\"App\">\n                <Gamepad\n                    deadZone={this.state.deadzone}\n                    onConnect={this.connectHandler}\n                    onDisconnect={this.disconnectHandler}\n                    onButtonDown={this.onButtonDown}\n                    onAxisChange={this.axisChangeHandler}\n                    onLB={this.onLB}\n                    onRB={this.onRB}\n                    onA={this.onA}\n                    onRT={this.onRT}\n                    onButtonUp={this.onButtonUp}\n\n                >\n                    <p></p>\n                </Gamepad>\n                <div>\n                    Seconds: {this.state.seconds}\n\n                </div>\n                <div style={wrapperStyle}>\n                    <p>Speed</p>\n                    <Slider min={0} max={100} defaultValue={100} onChange={this.onSpeedChange} handle={handle} />\n                </div>\n                <form onSubmit={this.handleSubmitDeadzone}>\n                    <label>\n                        Pick your deadzone:\n                        <select value={this.state.deadzone} onChange={this.handleChangeDeadzone}>\n                            <option value=\"0.02\">2</option>\n                            <option value=\"0.04\">4</option>\n                            <option value=\"0.06\">6</option>\n                            <option value=\"0.08\">8</option>\n                        </select>\n                    </label>\n                </form>\n                <div style={wrapperStyle}>\n                    <p>Sensitivity</p>\n                    <Slider min={0} max={100} defaultValue={50} onChange={this.onSensitivityChange} handle={handle} />\n                </div>\n                <h1>Live Server Data</h1>\n                {/* Check to see if any items are found*/}\n                {list.length ? (\n                    <div>\n                        {/* Render the list of items */}\n                        {list.map((item) => {\n                            return (\n                                <div>\n                                    {item}\n                                </div>\n                            );\n                        })}\n                    </div>\n                ) : (\n                        <div>\n                            <h2>Server Stuff</h2>\n\n                            {Math.round(this.state.lsx)},{Math.round(this.state.lsy)},{Math.round(this.state.rsy) * 10},{this.state.rt},{this.state.dpad},{this.state.a_button},{this.state.rb},{this.state.lb}, {this.state.deadzone}, {this.state.speed}, {this.state.sensitivity}\n                        </div>\n                    )\n                }\n            </div>\n        );\n    }\n\n}\n\nexport default List;"]},"metadata":{},"sourceType":"module"}